<?php

declare(strict_types=1);

$httpHost = getenv('HTTP_HOST');

if (!is_string($httpHost)) {
    throw new \RuntimeException('Environment variable "HTTP_HOST" is not set.');
}

$baseUrl = sprintf(
    'http://%s',
    $httpHost,
);

$paths = [
    '/archive/1998.php',
    '/archive/1999.php',
    '/archive/2000.php',
    '/archive/2001.php',
    '/archive/2002.php',
    '/archive/2003.php',
    '/archive/2004.php',
    '/archive/2005.php',
    '/archive/2006.php',
    '/archive/2007.php',
    '/archive/2008.php',
    '/archive/2009.php',
    '/archive/2010.php',
    '/archive/2011.php',
    '/archive/2012.php',
    '/archive/2013.php',
    '/archive/2014.php',
    '/archive/2015.php',
    '/archive/2016.php',
    '/archive/2017.php',
    '/archive/2018.php',
    '/archive/2019.php',
    '/archive/2020.php',
    '/archive/2021.php',
    '/archive/2022.php',
    '/archive/2023.php',
    '/build-setup.php',
    '/cal.php',
    '/ChangeLog-4.php',
    '/ChangeLog-5.php',
    '/ChangeLog-7.php',
    '/ChangeLog-8.php',
    '/conferences/index.php',
    '/contact.php',
    '/copyright.php',
    '/credits.php',
    '/docs.php',
    '/download-docs.php',
    '/download-logos.php',
    '/downloads.php',
    '/elephpant.php',
    '/eol.php',
    '/get-involved.php',
    '/git.php',
    '/gpg-keys.php',
    '/index.php',
    '/license/contrib-guidelines-code.php',
    '/license/distrib-guidelines-code.php',
    '/license/index.php',
    '/mailing-lists.php',
    '/manual/add-note.php',
    '/manual/en/book.var.php',
    '/manual/en/class.exception.php',
    '/manual/en/context.http.php',
    '/manual/en/funcref.php',
    '/manual/en/function.strpos.php',
    '/manual/en/index.php',
    '/manual/en/language.exceptions.php',
    '/manual/en/refs.basic.vartype.php',
    '/manual/help-translate.php',
    '/manual/php3.php',
    '/manual/php4.php',
    '/manual/php5.php',
    '/manual/phpfi2.php',
    '/manual/spam_challenge.php',
    '/manual/vote-note.php',
    '/mirror-info.php',
    '/mirror.php',
    '/mirroring-troubles.php',
    '/mirroring.php',
    '/mod.php',
    '/my.php',
    '/privacy.php',
    '/releases/4_1_0.php',
    '/releases/4_1_0_fr.php',
    '/releases/4_1_1.php',
    '/releases/4_1_2_win32.php',
    '/releases/4_2_0.php',
    '/releases/4_2_0_fr.php',
    '/releases/4_2_1.php',
    '/releases/4_2_1_fr.php',
    '/releases/4_2_2.php',
    '/releases/4_2_2_fr.php',
    '/releases/4_3_0.php',
    '/releases/4_3_0_fr.php',
    '/releases/4_3_1.php',
    '/releases/4_3_2.php',
    '/releases/4_3_2_fr.php',
    '/releases/4_3_3.php',
    '/releases/4_3_3_fr.php',
    '/releases/4_3_4.php',
    '/releases/4_3_4_fr.php',
    '/releases/4_3_5.php',
    '/releases/4_3_5_fr.php',
    '/releases/4_3_6.php',
    '/releases/4_3_6_fr.php',
    '/releases/4_3_7.php',
    '/releases/4_3_7_fr.php',
    '/releases/4_3_8.php',
    '/releases/4_3_9.php',
    '/releases/4_3_9_fr.php',
    '/releases/4_3_10.php',
    '/releases/4_3_10_fr.php',
    '/releases/4_3_11.php',
    '/releases/4_3_11_fr.php',
    '/releases/4_4_0.php',
    '/releases/4_4_1.php',
    '/releases/4_4_2.php',
    '/releases/4_4_3.php',
    '/releases/4_4_4.php',
    '/releases/4_4_5.php',
    '/releases/4_4_6.php',
    '/releases/4_4_7.php',
    '/releases/4_4_8.php',
    '/releases/4_4_9.php',
    '/releases/5_1_0.php',
    '/releases/5_1_1.php',
    '/releases/5_1_2.php',
    '/releases/5_1_3.php',
    '/releases/5_1_4.php',
    '/releases/5_1_5.php',
    '/releases/5_1_6.php',
    '/releases/5_2_0.php',
    '/releases/5_2_1.php',
    '/releases/5_2_2.php',
    '/releases/5_2_3.php',
    '/releases/5_2_4.php',
    '/releases/5_2_5.php',
    '/releases/5_2_6.php',
    '/releases/5_2_7.php',
    '/releases/5_2_8.php',
    '/releases/5_2_9.php',
    '/releases/5_2_10.php',
    '/releases/5_2_11.php',
    '/releases/5_2_12.php',
    '/releases/5_2_13.php',
    '/releases/5_2_14.php',
    '/releases/5_2_15.php',
    '/releases/5_2_16.php',
    '/releases/5_2_17.php',
    '/releases/5_3_0.php',
    '/releases/5_3_1.php',
    '/releases/5_3_2.php',
    '/releases/5_3_3.php',
    '/releases/5_3_4.php',
    '/releases/5_3_5.php',
    '/releases/5_3_6.php',
    '/releases/5_3_7.php',
    '/releases/5_3_8.php',
    '/releases/5_3_9.php',
    '/releases/5_3_10.php',
    '/releases/5_3_11.php',
    '/releases/5_3_12.php',
    '/releases/5_3_13.php',
    '/releases/5_3_14.php',
    '/releases/5_3_15.php',
    '/releases/5_3_16.php',
    '/releases/5_3_17.php',
    '/releases/5_3_18.php',
    '/releases/5_3_19.php',
    '/releases/5_3_20.php',
    '/releases/5_3_21.php',
    '/releases/5_3_22.php',
    '/releases/5_3_23.php',
    '/releases/5_3_24.php',
    '/releases/5_3_25.php',
    '/releases/5_3_26.php',
    '/releases/5_3_27.php',
    '/releases/5_3_28.php',
    '/releases/5_3_29.php',
    '/releases/5_4_0.php',
    '/releases/5_4_1.php',
    '/releases/5_4_2.php',
    '/releases/5_4_3.php',
    '/releases/5_4_4.php',
    '/releases/5_4_5.php',
    '/releases/5_4_6.php',
    '/releases/5_4_7.php',
    '/releases/5_4_8.php',
    '/releases/5_4_9.php',
    '/releases/5_4_10.php',
    '/releases/5_4_11.php',
    '/releases/5_4_12.php',
    '/releases/5_4_13.php',
    '/releases/5_4_14.php',
    '/releases/5_4_15.php',
    '/releases/5_4_16.php',
    '/releases/5_4_17.php',
    '/releases/5_4_18.php',
    '/releases/5_4_19.php',
    '/releases/5_4_20.php',
    '/releases/5_4_21.php',
    '/releases/5_4_22.php',
    '/releases/5_4_23.php',
    '/releases/5_4_24.php',
    '/releases/5_4_25.php',
    '/releases/5_4_26.php',
    '/releases/5_4_27.php',
    '/releases/5_4_28.php',
    '/releases/5_4_29.php',
    '/releases/5_4_30.php',
    '/releases/5_4_31.php',
    '/releases/5_4_32.php',
    '/releases/5_4_33.php',
    '/releases/5_4_34.php',
    '/releases/5_4_35.php',
    '/releases/5_4_36.php',
    '/releases/5_4_37.php',
    '/releases/5_4_38.php',
    '/releases/5_4_39.php',
    '/releases/5_4_40.php',
    '/releases/5_4_41.php',
    '/releases/5_4_42.php',
    '/releases/5_4_43.php',
    '/releases/5_4_44.php',
    '/releases/5_4_45.php',
    '/releases/5_5_0.php',
    '/releases/5_5_1.php',
    '/releases/5_5_2.php',
    '/releases/5_5_3.php',
    '/releases/5_5_4.php',
    '/releases/5_5_5.php',
    '/releases/5_5_6.php',
    '/releases/5_5_7.php',
    '/releases/5_5_8.php',
    '/releases/5_5_9.php',
    '/releases/5_5_10.php',
    '/releases/5_5_11.php',
    '/releases/5_5_12.php',
    '/releases/5_5_13.php',
    '/releases/5_5_14.php',
    '/releases/5_5_15.php',
    '/releases/5_5_16.php',
    '/releases/5_5_17.php',
    '/releases/5_5_18.php',
    '/releases/5_5_19.php',
    '/releases/5_5_20.php',
    '/releases/5_5_21.php',
    '/releases/5_5_22.php',
    '/releases/5_5_23.php',
    '/releases/5_5_24.php',
    '/releases/5_5_25.php',
    '/releases/5_5_26.php',
    '/releases/5_5_27.php',
    '/releases/5_5_28.php',
    '/releases/5_5_29.php',
    '/releases/5_5_30.php',
    '/releases/5_5_31.php',
    '/releases/5_5_32.php',
    '/releases/5_5_33.php',
    '/releases/5_5_34.php',
    '/releases/5_5_35.php',
    '/releases/5_5_36.php',
    '/releases/5_5_37.php',
    '/releases/5_5_38.php',
    '/releases/5_6_0.php',
    '/releases/5_6_1.php',
    '/releases/5_6_2.php',
    '/releases/5_6_3.php',
    '/releases/5_6_4.php',
    '/releases/5_6_5.php',
    '/releases/5_6_6.php',
    '/releases/5_6_7.php',
    '/releases/5_6_8.php',
    '/releases/5_6_9.php',
    '/releases/5_6_10.php',
    '/releases/5_6_11.php',
    '/releases/5_6_12.php',
    '/releases/5_6_13.php',
    '/releases/5_6_14.php',
    '/releases/5_6_15.php',
    '/releases/5_6_16.php',
    '/releases/5_6_17.php',
    '/releases/5_6_18.php',
    '/releases/5_6_19.php',
    '/releases/5_6_20.php',
    '/releases/5_6_21.php',
    '/releases/5_6_22.php',
    '/releases/5_6_23.php',
    '/releases/5_6_24.php',
    '/releases/5_6_25.php',
    '/releases/5_6_26.php',
    '/releases/5_6_27.php',
    '/releases/5_6_28.php',
    '/releases/5_6_29.php',
    '/releases/5_6_30.php',
    '/releases/5_6_31.php',
    '/releases/5_6_32.php',
    '/releases/5_6_33.php',
    '/releases/5_6_34.php',
    '/releases/5_6_35.php',
    '/releases/5_6_36.php',
    '/releases/5_6_37.php',
    '/releases/5_6_38.php',
    '/releases/5_6_39.php',
    '/releases/5_6_40.php',
    '/releases/7_0_0.php',
    '/releases/7_0_1.php',
    '/releases/7_0_2.php',
    '/releases/7_0_3.php',
    '/releases/7_0_4.php',
    '/releases/7_0_5.php',
    '/releases/7_0_6.php',
    '/releases/7_0_7.php',
    '/releases/7_0_8.php',
    '/releases/7_0_9.php',
    '/releases/7_0_10.php',
    '/releases/7_0_11.php',
    '/releases/7_0_12.php',
    '/releases/7_0_13.php',
    '/releases/7_0_14.php',
    '/releases/7_0_15.php',
    '/releases/7_0_16.php',
    '/releases/7_0_17.php',
    '/releases/7_0_18.php',
    '/releases/7_0_19.php',
    '/releases/7_0_20.php',
    '/releases/7_0_21.php',
    '/releases/7_0_22.php',
    '/releases/7_0_23.php',
    '/releases/7_0_24.php',
    '/releases/7_0_25.php',
    '/releases/7_0_26.php',
    '/releases/7_0_27.php',
    '/releases/7_0_28.php',
    '/releases/7_0_29.php',
    '/releases/7_0_30.php',
    '/releases/7_0_31.php',
    '/releases/7_0_32.php',
    '/releases/7_0_33.php',
    '/releases/7_1_0.php',
    '/releases/7_1_1.php',
    '/releases/7_1_2.php',
    '/releases/7_1_3.php',
    '/releases/7_1_4.php',
    '/releases/7_1_5.php',
    '/releases/7_1_6.php',
    '/releases/7_1_7.php',
    '/releases/7_1_8.php',
    '/releases/7_1_9.php',
    '/releases/7_1_10.php',
    '/releases/7_1_11.php',
    '/releases/7_1_12.php',
    '/releases/7_1_13.php',
    '/releases/7_1_14.php',
    '/releases/7_1_15.php',
    '/releases/7_1_16.php',
    '/releases/7_1_17.php',
    '/releases/7_1_18.php',
    '/releases/7_1_19.php',
    '/releases/7_1_20.php',
    '/releases/7_1_21.php',
    '/releases/7_1_22.php',
    '/releases/7_1_23.php',
    '/releases/7_1_24.php',
    '/releases/7_1_25.php',
    '/releases/7_1_26.php',
    '/releases/7_1_27.php',
    '/releases/7_1_28.php',
    '/releases/7_1_29.php',
    '/releases/7_1_30.php',
    '/releases/7_1_31.php',
    '/releases/7_1_32.php',
    '/releases/7_1_33.php',
    '/releases/7_2_0.php',
    '/releases/7_2_1.php',
    '/releases/7_2_2.php',
    '/releases/7_2_3.php',
    '/releases/7_2_4.php',
    '/releases/7_2_5.php',
    '/releases/7_2_6.php',
    '/releases/7_2_7.php',
    '/releases/7_2_8.php',
    '/releases/7_2_9.php',
    '/releases/7_2_10.php',
    '/releases/7_2_11.php',
    '/releases/7_2_12.php',
    '/releases/7_2_13.php',
    '/releases/7_2_14.php',
    '/releases/7_2_15.php',
    '/releases/7_2_16.php',
    '/releases/7_2_17.php',
    '/releases/7_2_18.php',
    '/releases/7_2_19.php',
    '/releases/7_2_20.php',
    '/releases/7_2_21.php',
    '/releases/7_2_22.php',
    '/releases/7_2_23.php',
    '/releases/7_2_24.php',
    '/releases/7_2_25.php',
    '/releases/7_2_26.php',
    '/releases/7_2_27.php',
    '/releases/7_2_28.php',
    '/releases/7_2_29.php',
    '/releases/7_2_30.php',
    '/releases/7_2_31.php',
    '/releases/7_2_32.php',
    '/releases/7_2_33.php',
    '/releases/7_2_34.php',
    '/releases/7_3_0.php',
    '/releases/7_3_1.php',
    '/releases/7_3_2.php',
    '/releases/7_3_3.php',
    '/releases/7_3_4.php',
    '/releases/7_3_5.php',
    '/releases/7_3_6.php',
    '/releases/7_3_7.php',
    '/releases/7_3_8.php',
    '/releases/7_3_9.php',
    '/releases/7_3_10.php',
    '/releases/7_3_11.php',
    '/releases/7_3_12.php',
    '/releases/7_3_13.php',
    '/releases/7_3_14.php',
    '/releases/7_3_15.php',
    '/releases/7_3_16.php',
    '/releases/7_3_17.php',
    '/releases/7_3_18.php',
    '/releases/7_3_19.php',
    '/releases/7_3_20.php',
    '/releases/7_3_21.php',
    '/releases/7_3_22.php',
    '/releases/7_3_23.php',
    '/releases/7_3_24.php',
    '/releases/7_3_25.php',
    '/releases/7_3_26.php',
    '/releases/7_3_27.php',
    '/releases/7_3_28.php',
    '/releases/7_3_29.php',
    '/releases/7_3_30.php',
    '/releases/7_3_31.php',
    '/releases/7_3_32.php',
    '/releases/7_3_33.php',
    '/releases/7_4_0.php',
    '/releases/7_4_1.php',
    '/releases/7_4_2.php',
    '/releases/7_4_3.php',
    '/releases/7_4_4.php',
    '/releases/7_4_5.php',
    '/releases/7_4_6.php',
    '/releases/7_4_7.php',
    '/releases/7_4_8.php',
    '/releases/7_4_9.php',
    '/releases/7_4_10.php',
    '/releases/7_4_11.php',
    '/releases/7_4_12.php',
    '/releases/7_4_13.php',
    '/releases/7_4_14.php',
    '/releases/7_4_15.php',
    '/releases/7_4_16.php',
    '/releases/7_4_18.php',
    '/releases/7_4_19.php',
    '/releases/7_4_20.php',
    '/releases/7_4_21.php',
    '/releases/7_4_22.php',
    '/releases/7_4_23.php',
    '/releases/7_4_24.php',
    '/releases/7_4_25.php',
    '/releases/7_4_26.php',
    '/releases/7_4_27.php',
    '/releases/7_4_28.php',
    '/releases/7_4_29.php',
    '/releases/7_4_30.php',
    '/releases/7_4_32.php',
    '/releases/7_4_33.php',
    '/releases/8.0/common.php',
    '/releases/8.0/de.php',
    '/releases/8.0/en.php',
    '/releases/8.0/es.php',
    '/releases/8.0/fr.php',
    '/releases/8.0/it.php',
    '/releases/8.0/ja.php',
    '/releases/8.0/ka.php',
    '/releases/8.0/nl.php',
    '/releases/8.0/pt_BR.php',
    '/releases/8.0/ru.php',
    '/releases/8.0/tr.php',
    '/releases/8.0/zh.php',
    '/releases/8.1/common.php',
    '/releases/8.1/de.php',
    '/releases/8.1/en.php',
    '/releases/8.1/es.php',
    '/releases/8.1/ja.php',
    '/releases/8.1/ka.php',
    '/releases/8.1/languages/de.php',
    '/releases/8.1/languages/en.php',
    '/releases/8.1/languages/es.php',
    '/releases/8.1/languages/ja.php',
    '/releases/8.1/languages/ka.php',
    '/releases/8.1/languages/pt_BR.php',
    '/releases/8.1/languages/ru.php',
    '/releases/8.1/languages/zh.php',
    '/releases/8.1/pt_BR.php',
    '/releases/8.1/ru.php',
    '/releases/8.1/zh.php',
    '/releases/8.2/common.php',
    '/releases/8.2/de.php',
    '/releases/8.2/en.php',
    '/releases/8.2/es.php',
    '/releases/8.2/fr.php',
    '/releases/8.2/ja.php',
    '/releases/8.2/languages/de.php',
    '/releases/8.2/languages/en.php',
    '/releases/8.2/languages/es.php',
    '/releases/8.2/languages/fr.php',
    '/releases/8.2/languages/ja.php',
    '/releases/8.2/languages/pt_BR.php',
    '/releases/8.2/languages/ru.php',
    '/releases/8.2/languages/zh.php',
    '/releases/8.2/pt_BR.php',
    '/releases/8.2/ru.php',
    '/releases/8.2/zh.php',
    '/releases/8.3/common.php',
    '/releases/8.3/de.php',
    '/releases/8.3/en.php',
    '/releases/8.3/es.php',
    '/releases/8.3/ja.php',
    '/releases/8.3/languages/de.php',
    '/releases/8.3/languages/en.php',
    '/releases/8.3/languages/es.php',
    '/releases/8.3/languages/ja.php',
    '/releases/8.3/languages/pt_BR.php',
    '/releases/8.3/languages/ru.php',
    '/releases/8.3/languages/uk.php',
    '/releases/8.3/languages/zh.php',
    '/releases/8.3/pt_BR.php',
    '/releases/8.3/ru.php',
    '/releases/8.3/uk.php',
    '/releases/8.3/zh.php',
    '/releases/8_0_0.php',
    '/releases/8_0_1.php',
    '/releases/8_0_2.php',
    '/releases/8_0_3.php',
    '/releases/8_0_5.php',
    '/releases/8_0_6.php',
    '/releases/8_0_7.php',
    '/releases/8_0_8.php',
    '/releases/8_0_9.php',
    '/releases/8_0_10.php',
    '/releases/8_0_11.php',
    '/releases/8_0_12.php',
    '/releases/8_0_13.php',
    '/releases/8_0_14.php',
    '/releases/8_0_15.php',
    '/releases/8_0_16.php',
    '/releases/8_0_17.php',
    '/releases/8_0_18.php',
    '/releases/8_0_19.php',
    '/releases/8_0_20.php',
    '/releases/8_0_21.php',
    '/releases/8_0_22.php',
    '/releases/8_0_23.php',
    '/releases/8_0_24.php',
    '/releases/8_0_25.php',
    '/releases/8_0_26.php',
    '/releases/8_0_27.php',
    '/releases/8_0_28.php',
    '/releases/8_0_29.php',
    '/releases/8_0_30.php',
    '/releases/8_1_0.php',
    '/releases/8_1_1.php',
    '/releases/8_1_2.php',
    '/releases/8_1_3.php',
    '/releases/8_1_4.php',
    '/releases/8_1_5.php',
    '/releases/8_1_6.php',
    '/releases/8_1_7.php',
    '/releases/8_1_8.php',
    '/releases/8_1_9.php',
    '/releases/8_1_10.php',
    '/releases/8_1_11.php',
    '/releases/8_1_12.php',
    '/releases/8_1_13.php',
    '/releases/8_1_14.php',
    '/releases/8_1_15.php',
    '/releases/8_1_16.php',
    '/releases/8_1_17.php',
    '/releases/8_1_18.php',
    '/releases/8_1_19.php',
    '/releases/8_1_20.php',
    '/releases/8_1_21.php',
    '/releases/8_1_22.php',
    '/releases/8_1_23.php',
    '/releases/8_1_24.php',
    '/releases/8_1_25.php',
    '/releases/8_1_26.php',
    '/releases/8_1_27.php',
    '/releases/8_2_0.php',
    '/releases/8_2_1.php',
    '/releases/8_2_2.php',
    '/releases/8_2_3.php',
    '/releases/8_2_4.php',
    '/releases/8_2_5.php',
    '/releases/8_2_6.php',
    '/releases/8_2_7.php',
    '/releases/8_2_8.php',
    '/releases/8_2_9.php',
    '/releases/8_2_10.php',
    '/releases/8_2_11.php',
    '/releases/8_2_12.php',
    '/releases/8_2_13.php',
    '/releases/8_2_14.php',
    '/releases/8_3_0.php',
    '/releases/8_3_1.php',
    '/releases/active.php',
    '/releases/feed.php',
    '/releases/index.php',
    '/releases/states.php',
    '/results.php',
    '/search.php',
    '/security-note.php',
    '/sitemap.php',
    '/sites.php',
    '/software.php',
    '/submit-event.php',
    '/support.php',
    '/supported-versions.php',
    '/thanks.php',
    '/unsub.php',
    '/urlhowto.php',
];

$root = realpath(__DIR__.'/../../');
$paths2 = [
    ...glob($root.'/*.php'),
    ...glob($root.'/releases/*.php'),
    ...glob($root.'/releases/*/*.php'),
    ...glob($root.'/releases/*/*/*.php'),
    ...glob($root.'/manual/*.php'),
    ...glob($root.'/manual/en/*.php'),
    ...glob($root.'/license/*.php'),
    ...glob($root.'/archive/*.php'),
    ...glob($root.'/conferences/*.php'),
];
$paths2 = str_replace($root, '', $paths);

var_dump(array_diff($paths, $paths2));
var_dump(array_diff($paths2, $paths));

$pathsToStatusCodes = array_combine(
    $paths,
    array_map(static function (string $url) use ($baseUrl): int {
        $handle = curl_init();

        $options = [
            CURLOPT_RETURNTRANSFER => true,
            CURLOPT_URL => sprintf(
                '%s%s',
                $baseUrl,
                $url,
            ),
        ];

        curl_setopt_array($handle, $options);

        curl_exec($handle);

        return curl_getinfo($handle, CURLINFO_HTTP_CODE);
    }, $paths),
);

$pathsWithUnexpectedStatusCodes = array_filter($pathsToStatusCodes, static function (int $statusCode): bool {
    return $statusCode !== 200;
});

var_dump($pathsWithUnexpectedStatusCodes);
?>
